# 게임 흐름 및 승리 조건

## 게임 진행 흐름

### 1. 메인 로비 단계

1. **서버 연결**: 클라이언트는 서버(localhost:5000)에 TCP 연결
2. **방 목록 조회**: 현재 활성 게임 방 목록 표시
3. **방 생성/입장**:
   - 새로운 방 생성: 방 이름 + 최대 인원 지정
   - 기존 방 입장: 방 ID 선택

### 2. 매칭 대기 단계 (로비)

1. **플레이어 수집**: 방에 입장할 때마다 플레이어 목록 업데이트
2. **완전 충원 대기**: 4명이 모일 때까지 대기 (최대 60초)
3. **방장 권한**: 방장만 게임 시작 버튼 활성화
4. **인원 부족 시**: 60초 초과 → 자동 게임 시작 또는 취소

### 3. 캐릭터 선택 단계

1. **원소 트리 선택**: 5개 원소 중 1개 선택
   - 불, 물, 바람, 땅, 전기
2. **초기 스탯 설정**: 선택한 원소에 맞는 기본 스탯 부여
3. **게임 준비 완료**: 모든 플레이어가 선택 완료 대기

### 4. 게임 진행 단계 (10분)

#### 초기 배치 (0초)
- 4명의 플레이어가 맵의 다른 위치에 스폰
- HP/MP 풀 회복
- 초기 경험치 0

#### Phase 0 (0-3분)
- **지도 상태**: 전체 맵 1920x1920 사용 가능
- **목표**: 몬스터 처치 및 아이템 수집
- **이벤트**: 몬스터 스폰, 플레이어 자유 이동

#### Phase 1 (3-6분)
- **지도 상태**: 외곽 구역 축소 시작
- **피해**: 안전지역 밖 → 초당 5 데미지
- **목표**: 중심부로 이동하며 전투

#### Phase 2 (6-8분)
- **지도 상태**: 중간 구역까지 축소
- **피해**: 초당 10 데미지
- **목표**: 마지막 자원 확보 및 전투 준비

#### Phase 3 (8-10분)
- **지도 상태**: 중앙 홀만 남음 (매우 작은 지역)
- **피해**: 초당 20 데미지
- **목표**: 생존 경쟁 (대피불가)

### 5. 결과 단계

게임 종료 시 다음 정보 표시:
- **1등**: 우승자 표시
- **순위**: 4명 모두 순위 표시
- **획득 경험치**: 순위별 경험치 보상
- **게임 통계**: 플레이 시간, 처치 몬스터 수, 데미지 등

---

## 승리 조건

### 우승 조건
- **최후의 1명 생존**: 다른 3명이 모두 HP 0 또는 독가스 피해로 제거

### 생존 조건
- HP > 0 유지
- Phase 3에서 축소 피해를 계속 받으면 최종적으로 모두 사망 가능 (매우 드문 경우)

---

## 패배 조건

1. **직접 전투 패배**: 다른 플레이어/몬스터의 공격으로 HP = 0
2. **독가스 피해**: 안전지역 밖에서 독가스로 HP = 0
3. **항복**: 플레이어가 포기 버튼 클릭

---

## 게임 내 주요 요소

### 아이템 시스템
- **체력 포션**: +30 HP 회복
- **마나 포션**: +20 MP 회복
- **스킬북**: 특정 스킬 쿨다운 50% 감소 (5초)
- **마법 에센스**: 모든 공격력 +10% (10초 지속)

### 경험치/레벨 시스템
- **경험치 획득 방법**:
  - 몬스터 처치: 10~30 EXP
  - 플레이어 처치: 50 EXP
  - 생존 보너스: 순위 × 100 EXP

- **레벨업 공식**:
  - 필요 경험치 = 레벨 × 100
  - 레벨 상한: 20

- **레벨업 시 획득**:
  - HP +20
  - MP +15
  - 공격력 +5%

---

## 화면 전환 흐름

```
로딩화면 (SplashScreen)
    ↓
메인메뉴 (MenuScreen)
    ↓
방목록 (RoomListScreen) ← → 방생성 다이얼로그
    ↓
로비 (LobbyScreen) - 4명 모일 때까지 대기
    ↓
캐릭터선택 (CharacterSelectScreen)
    ↓
게임플레이 (GameScreen) - 10분 진행
    ↓
결과화면 (ResultScreen)
    ↓
메인메뉴로 복귀
```
